var l=Object.defineProperty;var c=(u,e,s)=>e in u?l(u,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):u[e]=s;var i=(u,e,s)=>(c(u,typeof e!="symbol"?e+"":e,s),s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function s(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(t){if(t.ep)return;t.ep=!0;const n=s(t);fetch(t.href,n)}})();class h{constructor(){i(this,"currentQuizNumber");i(this,"quizzesLength");i(this,"questions");i(this,"score",0);i(this,"buttons",[]);i(this,"isQuizFinished",!1);i(this,"selectedOption",null);i(this,"questionElementRef",document.querySelector(".quiz__title"));i(this,"optionsContainerElementRef",document.querySelector(".quiz__options"));i(this,"nextQuizButtonElementRef",document.querySelector(".quiz__next"));i(this,"currentQuizNumberElementRef",document.querySelector(".quiz__current"));i(this,"quizLengthElementRef",document.querySelector(".quiz__length"));i(this,"quizCodeElementRef",document.querySelector(".quiz__code"));i(this,"quizFinishButtonElementRef",document.querySelector(".quiz__finish"));i(this,"quizResultElementRef",document.querySelector(".quiz__result"));i(this,"quizBodyElementRef",document.querySelector(".quiz__body"));i(this,"scoreElementRef",document.querySelector(".quiz__score"));i(this,"quizStartButtonElementRef",document.querySelector(".quiz__start"));i(this,"quizProgressElementRef",document.querySelector(".quiz__progress"));i(this,"quizFinishLengthElementRef",document.querySelector(".quiz__finish-length"));i(this,"quizProgressBarElementRef",document.querySelector(".quiz__progress-bar"));i(this,"quizInfoButtonElementRef",document.querySelector(".quiz__info-button"));i(this,"quizInfoElementRef",document.querySelector(".quiz__info"));i(this,"quizInfoTextElementRef",document.querySelector(".quiz__info-text"));i(this,"quizInfoCloseElementRef",document.querySelector(".quiz__info-close"))}init(){const e=localStorage.getItem("currentQuizNumber"),s=localStorage.getItem("isQuizFinished"),o=localStorage.getItem("selectedOption"),t=localStorage.getItem("score"),n=localStorage.getItem("quizzesLength");this.nextQuizButtonElementRef.disabled=!0,this.quizInfoButtonElementRef.disabled=!0,this.nextQuizButtonElementRef.addEventListener("click",this.nextQuestion.bind(this)),this.quizFinishButtonElementRef.addEventListener("click",this.finishQuiz.bind(this)),this.quizStartButtonElementRef.addEventListener("click",this.startAgain.bind(this)),this.quizInfoButtonElementRef.addEventListener("click",this.showInfo.bind(this)),this.quizInfoCloseElementRef.addEventListener("click",()=>{this.quizInfoElementRef.classList.remove("quiz__info_visible")}),n&&(this.quizzesLength=+n),t&&(this.score=+t,this.scoreElementRef.innerText=this.score),s&&(this.isQuizFinished=s==="true",this.isQuizFinished&&this.finishQuiz()),o&&(this.selectedOption=JSON.parse(o)),e?(this.currentQuizNumber=+e,console.log(this.quizzesLength),this.currentQuizNumber===this.quizzesLength&&this.showFinishButton()):(this.currentQuizNumber=1,localStorage.setItem("currentQuizNumber",this.currentQuizNumber.toString())),this.loadQuestions()}loadQuestions(){console.log("loadQuestions"),fetch("./questions.json").then(e=>e.json()).then(e=>{this.questions=e,this.quizzesLength=e.length,localStorage.setItem("quizzesLength",this.quizzesLength.toString()),this.isQuizFinished||this.drowQuestion()}).catch(e=>{console.error("Error fetching the JSON file:",e)})}drowQuestion(){console.log("drowQuestion");const e=this.currentQuizNumber-1,s=this.questions[e];if(this.quiz=s,this.questionElementRef.innerText=this.quiz.question,this.currentQuizNumberElementRef.innerText=this.currentQuizNumber,this.quizLengthElementRef.innerText=this.quizzesLength,this.quizCodeElementRef.innerHTML=this.quiz.code,Prism.highlightElement(this.quizCodeElementRef),this.quiz.options.forEach(o=>{const t=this.createButton(o);this.buttons.push(t),t.addEventListener("click",this.selectOption.bind(this,o,t)),this.optionsContainerElementRef.appendChild(t)}),this.selectedOption){this.nextQuizButtonElementRef.disabled=!1,this.quizInfoButtonElementRef.disabled=!1;const o=this.quiz.options.findIndex(n=>n===this.selectedOption),t=this.buttons[o];this.selectedOption===this.quiz.answer?t.classList.add("quiz__option_correct"):(t.classList.add("quiz__option_incorrect"),this.showCorrectAnswer()),this.disableButtons()}}createButton(e){const s=document.createElement("button");return s.classList.add("quiz__option"),s.innerText=e,s}selectOption(e,s){this.selectedOption=e,localStorage.setItem("selectedOption",JSON.stringify(e)),this.disableButtons(),this.nextQuizButtonElementRef.disabled=!1,this.quizInfoButtonElementRef.disabled=!1,this.currentQuizNumber===this.quizzesLength&&(this.quizFinishButtonElementRef.disabled=!1),e===this.quiz.answer?(this.increaseScore(),s.classList.add("quiz__option_correct")):(s.classList.add("quiz__option_incorrect"),this.showCorrectAnswer())}showCorrectAnswer(){const e=this.quiz.options.findIndex(o=>o===this.quiz.answer);this.buttons[e].classList.add("quiz__option_correct")}increaseScore(){const e=localStorage.getItem("score");e!==null?this.score=+e+1:this.score=1,localStorage.setItem("score",this.score.toString())}nextQuestion(){this.currentQuizNumber++,localStorage.setItem("currentQuizNumber",this.currentQuizNumber.toString()),this.cleanSelectedOption(),this.nextQuizButtonElementRef.disabled=!0,this.quizInfoButtonElementRef.disabled=!0,this.drowQuestion(),this.currentQuizNumber===this.quizzesLength&&this.showFinishButton()}cleanSelectedOption(){this.selectedOption=null,this.selectedOption=null,localStorage.removeItem("selectedOption"),this.buttons.forEach(e=>{e.remove()}),this.buttons=[]}disableButtons(){this.buttons.forEach(e=>{e.disabled=!0})}showFinishButton(){this.nextQuizButtonElementRef.classList.remove("quiz__next_visible"),this.quizFinishButtonElementRef.classList.add("quiz__finish_visible"),this.selectedOption||(this.quizFinishButtonElementRef.disabled=!0)}finishQuiz(){if(console.log("finishQuiz"),this.quizStartButtonElementRef.classList.add("quiz__start_visible"),this.nextQuizButtonElementRef.classList.remove("quiz__next_visible"),this.quizProgressElementRef.classList.remove("quiz__progress_visible"),this.quizFinishButtonElementRef.classList.remove("quiz__finish_visible"),this.quizInfoButtonElementRef.classList.remove("quiz__info-button_visible"),!this.quizzesLength){const s=localStorage.getItem("quizzesLength");this.quizzesLength=+s}const e=Number((this.score/this.quizzesLength*100).toFixed(2))+"%";localStorage.setItem("scorePercent",e.toString()),document.documentElement.style.setProperty("--score-percent",e),this.quizProgressBarElementRef.innerText=e,this.quizFinishLengthElementRef.innerText=this.quizzesLength,this.cleanSelectedOption(),localStorage.setItem("isQuizFinished","true"),localStorage.removeItem("currentQuizNumber"),this.quizBodyElementRef.classList.remove("quiz__body_visible"),this.scoreElementRef.innerText=this.score,this.quizResultElementRef.classList.add("quiz__result_visible")}startAgain(){console.log("startAgain"),localStorage.removeItem("isQuizFinished"),localStorage.removeItem("score"),this.quizResultElementRef.classList.remove("quiz__result_visible"),this.nextQuizButtonElementRef.classList.add("quiz__next_visible"),this.nextQuizButtonElementRef.disabled=!0,this.quizInfoButtonElementRef.classList.add("quiz__info-button_visible"),this.quizInfoButtonElementRef.disabled=!0,this.quizBodyElementRef.classList.add("quiz__body_visible"),this.quizStartButtonElementRef.classList.remove("quiz__start_visible"),this.quizProgressElementRef.classList.add("quiz__progress_visible"),this.currentQuizNumber=1,localStorage.setItem("currentQuizNumber",this.currentQuizNumber.toString()),this.score=0,this.drowQuestion()}showInfo(){this.quizInfoTextElementRef.innerHTML=this.quiz.info,this.quizInfoElementRef.classList.add("quiz__info_visible")}}const z=new h;z.init();
